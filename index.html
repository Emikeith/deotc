<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winnipeg EOTC Portal</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="logo-container"><img src="logo.png" alt="Church Logo" onerror="this.src='https://via.placeholder.com/80'"></div>
    <h1 style="margin:0;">á‹¨áŠ¢á‰µá‹®áŒµá‹« áŠ¦áˆ­á‰¶á‹¶áŠ­áˆµ á‰°á‹‹áˆ•á‹¶ á‰¤á‰°áŠ­áˆ­áˆµá‰²á‹«áŠ•</h1>
    <p style="color:var(--gold); font-weight:bold; margin:5px 0;">ETHIOPIAN ORTHODOX TEWAHEDO CHURCH</p>
</header>

<div class="ticker-wrap">
    <div class="ticker-label">ğŸ“¢ á‹œáŠ“ / NEWS</div>
    <div class="ticker-content">
        <div class="ticker-text">
            ğŸ”” áˆ›áˆ³áˆ°á‰¢á‹«á¡ áŠáŒˆ á‹¨áŒ¾áˆ á‰€áŠ• áˆ˜áˆ†áŠ‘áŠ• áŠ¥áŠ“áˆ³áˆµá‰£áˆˆáŠ• :: &nbsp;&nbsp;&nbsp;&nbsp; â›ªï¸ á‹¨áˆ°áŠ•á‰ á‰µ á‰µáˆáˆ…áˆ­á‰µ á‰¤á‰µ áˆá‹áŒˆá‰£ á‰°áŒ€áˆáˆ¯áˆ :: &nbsp;&nbsp;&nbsp;&nbsp; ğŸ™ áŒ¸áˆá‰° áˆ›áŠ…áˆŒá‰µ á‰  5á¡00 AM á‹­áŒ€áˆáˆ«áˆ ::
        </div>
    </div>
</div>

<nav>
    <button class="menu-toggle" onclick="mainMenuToggle()">â˜° MENU / áˆ›á‹áŒ«</button>
    <ul class="menu-container" id="main-nav-ul">
        <li class="nav-item">
            <a class="nav-link" onclick="subMenuToggle(this)">Home</a>
            <div class="dropdown">
                <a onclick="goTo('home-main')">Main Home</a>
                <a onclick="goTo('about-us')">About Us</a>
                <a onclick="goTo('clergy-page')">Clergy</a>
                <a onclick="goTo('services-page')">Services</a>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link" onclick="subMenuToggle(this)">Ministries</a>
            <div class="dropdown">
                <a onclick="goTo('min-hub')">Ministry Hub</a>
                <a onclick="goTo('min-ss')">Sunday School</a>
                <a onclick="goTo('min-spon')">Sponsorship</a>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link" onclick="subMenuToggle(this)">Calendar & Events</a>
            <div class="dropdown">
                <a onclick="goTo('calendar-main')">Calendar and Feasts</a>
                <a onclick="goTo('upcoming-events')">Upcoming Events</a>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link" onclick="subMenuToggle(this)">Contact & Register</a>
            <div class="dropdown">
                <a onclick="goTo('reg-mem')">Become a Member</a>
                <a onclick="goTo('reg-ss')">Sunday School Registration</a>
                <a onclick="goTo('reg-abinet')">Abinet School</a>
                <a onclick="goTo('reg-serve')">Serve With Us</a>
                <a onclick="goTo('reg-spon')">Sponsorship Registration</a>
            </div>
        </li>
        <li class="nav-item"><a class="nav-link" onclick="goTo('pay-page')">Donations</a></li>
    </ul>
</nav>

<section id="home-main" class="page active">
    <div class="card" style="text-align:center; border:2px solid var(--gold);">
        <div id="g-date" style="font-size: 1rem; color: #666;"></div>
        <div id="e-date" style="font-size: 1.4rem; color: var(--red); font-weight: bold; margin-top:5px;"></div>
    </div>
    <div class="card">
        <h2 id="proj-title" style="color:var(--red);"></h2>
        <p id="proj-desc"></p>
        <div class="video-wrapper"><iframe id="proj-video" src="" frameborder="0" allowfullscreen></iframe></div>
        <div class="progress-bg"><div id="proj-progress" class="progress-fill"></div></div>
        
        <h3 style="margin-top:30px; color:var(--red);">Project Gallery / á‹¨áŒáŠ•á‰£á‰³ áá‰¶á‹á‰½</h3>
        <div id="building-gallery" class="gallery-grid"></div>
        
        <div style="text-align:center; margin-top:20px;">
            <a id="btn-build" href="#" target="_blank" class="btn btn-paypal">Donate to Building Fund</a>
        </div>
    </div>
</section>

<section id="about-us" class="page"><div class="card"><h2>About Us</h2><p id="txt-about"></p></div></section>
<section id="clergy-page" class="page"><div class="card"><h2>Clergy</h2><div id="lst-clergy"></div></div></section>
<section id="services-page" class="page"><div class="card"><h2>Our Services</h2><div id="lst-services"></div></div></section>
<section id="min-hub" class="page"><div class="card"><h2>Ministry Hub</h2><p id="txt-hub"></p></div></section>
<section id="min-ss" class="page"><div class="card"><h2>Sunday School</h2><p id="txt-ss"></p></div></section>
<section id="min-spon" class="page"><div class="card"><h2>Sponsorship</h2><p id="txt-spon"></p></div></section>

<section id="calendar-main" class="page">
    <div class="card">
        <h2>Calendar & Feasts</h2>
        <iframe src="https://calendar.google.com/calendar/embed?src=N2U5NjhkZjM3YmZjZWZkODhmNjUwNzlkZjA1Y2Y2NzQxNjI1YTM2ZDJjMzlkMTg0NDJjZTEzNTZlMWY0NmEzYkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t" width="100%" height="600" frameborder="0"></iframe>
    </div>
</section>

<section id="upcoming-events" class="page">
    <div class="card">
        <h2>Upcoming Events</h2>
        <iframe src="https://calendar.google.com/calendar/embed?mode=AGENDA&src=N2U5NjhkZjM3YmZjZWZkODhmNjUwNzlkZjA1Y2Y2NzQxNjI1YTM2ZDJjMzlkMTg0NDJjZTEzNTZlMWY0NmEzYkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t" width="100%" height="400" frameborder="0"></iframe>
    </div>
</section>

<section id="reg-mem" class="page"><div class="card"><h2>Membership</h2><a id="l-mem" href="#" target="_blank" class="btn btn-primary">Open Form</a></div></section>
<section id="reg-ss" class="page"><div class="card"><h2>Sunday School</h2><a id="l-ss" href="#" target="_blank" class="btn btn-primary">Open Form</a></div></section>
<section id="reg-abinet" class="page"><div class="card"><h2>Abinet School</h2><a id="l-ab" href="#" target="_blank" class="btn btn-primary">Open Form</a></div></section>
<section id="reg-serve" class="page"><div class="card"><h2>Serve With Us</h2><a id="l-serve" href="#" target="_blank" class="btn btn-primary">Open Form</a></div></section>
<section id="reg-spon" class="page"><div class="card"><h2>Sponsorship</h2><a id="l-spon" href="#" target="_blank" class="btn btn-primary">Open Form</a></div></section>

<section id="pay-page" class="page">
    <div class="card" style="text-align:center;">
        <h2>Donations</h2>
        <a id="btn-pay" href="#" target="_blank" class="btn btn-paypal">General Donation (PayPal)</a>
        <p id="txt-zelle" style="margin-top:20px; font-weight:bold;"></p>
        <p id="txt-mail" style="color:#666;"></p>
    </div>
</section>

<div id="gallery-modal" onclick="this.style.display='none'"><img id="modal-img" src=""></div>

<script src="content.js"></script>
<script>
    // NAVIGATION
    function mainMenuToggle() { document.getElementById('main-nav-ul').classList.toggle('active-menu'); }
    function subMenuToggle(el) { if (window.innerWidth <= 800) el.parentElement.classList.toggle('open-submenu'); }
    function goTo(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.getElementById('main-nav-ul').classList.remove('active-menu');
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('open-submenu'));
        window.scrollTo(0,0);
    }

    // ETHIOPIAN CALENDAR LOGIC
    function updateBilingualDate() {
        const now = new Date();
        document.getElementById('g-date').innerText = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        
        // Dynamic Ethiopian Calculation (Approximate)
        const ethiopianMonths = ["áˆ˜áˆµáŠ¨áˆ¨áˆ", "áŒ¥á‰…áˆá‰µ", "áŠ…á‹³áˆ­", "á‰³áŠ…áˆ£áˆ¥", "áŒ¥áˆ­", "á‹¨áŠ«á‰²á‰µ", "áˆ˜áŒ‹á‰¢á‰µ", "áˆšá‹«á‹á‹«", "áŒáŠ•á‰¦á‰µ", "áˆ°áŠ”", "áˆáˆáˆŒ", "áŠáˆáˆ´", "áŒ³áŒ‰áˆœ"];
        let eDay = now.getDate() + 11; 
        let eMonthIdx = 4; // Currently January = Tir
        let eYear = now.getFullYear() - 8;
        
        if (eDay > 30) { eDay -= 30; eMonthIdx++; }
        document.getElementById('e-date').innerText = `${ethiopianMonths[eMonthIdx]} ${eDay}, ${eYear} á‹“.áˆ`;
    }

    // GALLERY MODAL
    function openLightbox(url) {
        document.getElementById('modal-img').src = url;
        document.getElementById('gallery-modal').style.display = 'flex';
    }

    // MASTER RENDER
    function render() {
        const d = ChurchData;
        updateBilingualDate();
        
        // Home
        document.getElementById('proj-title').innerText = d.buildingProject.title;
        document.getElementById('proj-desc').innerText = d.buildingProject.description;
        document.getElementById('proj-video').src = d.buildingProject.videoURL;
        document.getElementById('proj-progress').style.width = d.buildingProject.progress;
        document.getElementById('proj-progress').innerText = d.buildingProject.progress;
        document.getElementById('btn-build').href = d.donations.paypalBuilding;

        // Gallery
        document.getElementById('building-gallery').innerHTML = d.buildingGallery.map(img => `
            <div class="gallery-item" onclick="openLightbox('${img.url}')">
                <img src="${img.url}">
                <div class="gallery-caption">${img.caption}</div>
            </div>
        `).join('');

        // Text Content
        document.getElementById('txt-about').innerText = d.aboutUs;
        document.getElementById('lst-clergy').innerHTML = d.clergy.map(c => `<h3>${c.name}</h3><p><b>${c.title}</b></p><p>${c.bio}</p>`).join('');
        document.getElementById('lst-services').innerHTML = d.services.map(s => `<b>${s.name}</b>: ${s.time}`).join('<br><br>');
        document.getElementById('txt-hub').innerText = d.ministryHub;
        document.getElementById('txt-ss').innerText = d.sundaySchool;
        document.getElementById('txt-spon').innerText = d.sponsorship;

        // Links
        document.getElementById('l-mem').href = d.registrationLinks.membership;
        document.getElementById('l-ss').href = d.registrationLinks.sundaySchool;
        document.getElementById('l-ab').href = d.registrationLinks.abinetSchool;
        document.getElementById('l-serve').href = d.registrationLinks.serveWithUs;
        document.getElementById('l-spon').href = d.registrationLinks.sponsorship;

        // Donation
        document.getElementById('btn-pay').href = d.donations.paypalGeneral;
        document.getElementById('txt-zelle').innerText = `Zelle: ${d.donations.zelle}`;
        document.getElementById('txt-mail').innerText = `Mailing Address: ${d.donations.mailing}`;
    }

    window.onload = render;
</script>
</body>
</html>
