<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EOTC Winnipeg Portal</title>
    <style>
        :root {
            --red: #630F16;
            --gold: #D4A017;
            --cream: #FDF5E6;
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background: var(--cream); }
        
        /* Menu Styling */
        nav { background: var(--red); padding: 10px 0; position: sticky; top: 0; z-index: 1000; }
        .menu-container { list-style: none; display: flex; justify-content: center; margin: 0; padding: 0; }
        .nav-item { position: relative; padding: 10px 20px; }
        .nav-link { color: white; text-decoration: none; font-weight: bold; cursor: pointer; }
        .dropdown { 
            display: none; position: absolute; background: white; 
            box-shadow: 0 8px 16px rgba(0,0,0,0.2); min-width: 200px; z-index: 1; 
        }
        .dropdown a { color: var(--red); padding: 12px 16px; text-decoration: none; display: block; font-size: 14px; border-bottom: 1px solid #eee; }
        .dropdown a:hover { background-color: var(--gold); color: white; }
        .nav-item:hover .dropdown { display: block; }

        /* Ticker */
        .ticker-bar { background: #333; color: white; display: flex; align-items: center; padding: 5px; }
        .ticker-label { background: var(--gold); padding: 5px 15px; font-weight: bold; margin-right: 15px; }
        
        /* THE VIDEO FIX: Proper responsive container */
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            max-width: 100%;
            background: #000;
            border-radius: 8px;
            margin: 20px 0;
        }
        .video-container iframe {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
        }

        .card { background: white; margin: 20px; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .page { display: none; }
        .page.active { display: block; }
        .progress-bg { background: #ddd; border-radius: 10px; height: 20px; }
        .progress-fill { background: var(--red); height: 100%; border-radius: 10px; color: white; text-align: center; font-size: 12px; }
        header { background: var(--red); color: white; text-align: center; padding: 30px 10px; }
    </style>
</head>
<body>

<header>
    <h1>የኢትዮጵያ ኦርቶዶክስ ተዋሕዶ ቤተክርስቲያን</h1>
    <p style="color:var(--gold); font-weight:bold;">ETHIOPIAN ORTHODOX TEWAHEDO CHURCH</p>
</header>

<div class="ticker-bar">
    <div class="ticker-label">NEWS</div>
    <div class="ticker-wrap"><div id="ticker-content" class="ticker-text"></div></div>
</div>

<nav>
    <ul class="menu-container">
        <li class="nav-item"><a class="nav-link">Home</a>
            <div class="dropdown">
                <a onclick="goTo('home-main')">Main Home</a>
                <a onclick="goTo('about-us')">About Us</a>
                <a onclick="goTo('clergy-p')">Clergy</a>
                <a onclick="goTo('serv-p')">Services</a>
            </div>
        </li>
        <li class="nav-item"><a class="nav-link">Ministries</a>
            <div class="dropdown">
                <a onclick="goTo('min-hub')">Ministry Hub</a>
                <a onclick="goTo('min-ss')">Sunday School</a>
                <a onclick="goTo('min-spon')">Sponsorship</a>
            </div>
        </li>
        <li class="nav-item"><a class="nav-link">Calendar & Events</a>
            <div class="dropdown">
                <a onclick="goTo('cal-sch')">Parish Schedule</a>
                <a onclick="goTo('cal-feast')">Calendar & Feasts</a>
                <a onclick="goTo('cal-up')">Upcoming Events</a>
            </div>
        </li>
        <li class="nav-item"><a class="nav-link">Contact Us</a>
            <div class="dropdown">
                <a onclick="goTo('reg-mem')">Become a Member</a>
                <a onclick="goTo('reg-ss')">Sunday School</a>
                <a onclick="goTo('reg-ab')">Abinet School</a>
                <a onclick="goTo('reg-srv')">Serve With Us</a>
                <a onclick="goTo('reg-sp')">Sponsorship Registration</a>
            </div>
        </li>
        <li class="nav-item"><a class="nav-link" onclick="goTo('pay-p')">Donations</a></li>
    </ul>
</nav>

<section id="home-main" class="page active">
    <div class="card" style="text-align:center; border:2px solid var(--gold);">
        <div id="g-date"></div><div id="e-date" style="font-size:1.5rem; color:var(--red); font-weight:bold;"></div>
    </div>
    <div class="card">
        <h2 id="proj-title" style="color:var(--red);"></h2>
        <p id="proj-desc"></p>
        
        <div class="video-container">
            <iframe id="proj-video" src="" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>

        <h4>Construction Progress: <span id="proj-status"></span></h4>
        <div class="progress-bg"><div id="proj-progress" class="progress-fill"></div></div>
        <div id="building-gallery" style="display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px; margin-top:20px;"></div>
    </div>
</section>

<section id="about-us" class="page"><div class="card"><h2>About Us</h2><p id="txt-about"></p></div></section>
<section id="clergy-p" class="page"><div class="card"><h2>Clergy</h2><div id="lst-clergy"></div></div></section>
<section id="serv-p" class="page"><div class="card"><h2>Services</h2><div id="lst-serv"></div></div></section>
<section id="min-hub" class="page"><div class="card"><h2>Ministry Hub</h2><p id="txt-hub"></p></div></section>
<section id="min-ss" class="page">
    <div class="card">
        <div class="split-view">
            <div class="split-text"><h2>Sunday School</h2><p id="txt-ss"></p></div>
            <div class="split-img"><img id="img-ss" src="" style="width:100%; border-radius:8px;"></div>
        </div>
    </div>
</section>
<section id="min-spon" class="page"><div class="card"><h2>Sponsorship</h2><p id="txt-spon"></p></div></section>
<section id="cal-sch" class="page"><div class="card"><h2>Parish Schedule</h2><p>Our weekly prayer schedule.</p></div></section>
<section id="cal-feast" class="page"><div class="card"><h2>Calendar & Feasts</h2><iframe src="https://calendar.google.com/calendar/embed?src=en.et%23holiday%40group.v.calendar.google.com&ctz=America%2FWinnipeg" width="100%" height="600" frameborder="0"></iframe></div></section>
<section id="cal-up" class="page"><div class="card"><h2>Upcoming Events</h2><iframe src="https://calendar.google.com/calendar/embed?mode=AGENDA&src=en.et%23holiday%40group.v.calendar.google.com&ctz=America%2FWinnipeg" width="100%" height="450" frameborder="0"></iframe></div></section>
<section id="reg-mem" class="page"><div class="card"><h2>Become a Member</h2><a id="l-mem" class="btn-reg" target="_blank">Open Form</a></div></section>
<section id="reg-ss" class="page"><div class="card"><h2>Sunday School</h2><a id="l-ss" class="btn-reg" target="_blank">Open Form</a></div></section>
<section id="reg-ab" class="page"><div class="card"><h2>Abinet School</h2><a id="l-ab" class="btn-reg" target="_blank">Open Form</a></div></section>
<section id="reg-srv" class="page"><div class="card"><h2>Serve With Us</h2><a id="l-srv" class="btn-reg" target="_blank">Open Form</a></div></section>
<section id="reg-sp" class="page"><div class="card"><h2>Sponsorship</h2><a id="l-sp" class="btn-reg" target="_blank">Open Form</a></div></section>
<section id="pay-p" class="page"><div class="card" style="text-align:center;"><h2>Donations</h2><p id="txt-zelle"></p></div></section>

<script>
    // Ensure your content.js uses the /embed/ format for YouTube
    const ChurchData = {
        newsTicker: "እንኳን ለብርሃነ ጥምቀቱ በሰላም አደረሳችሁ :: Building Project Fundraising in progress.",
        aboutUs: "Dedicated to serving our community in Winnipeg.",
        buildingProject: {
            title: "Cathedral Construction Project",
            description: "View our progress on the new building sanctuary.",
            // FIX: Use 'embed' URL, not 'watch' URL
            videoURL: "https://www.youtube.com/embed/P_P_K1_U-t0", 
            status: "Phase 3: Roofing",
            progress: "82%"
        },
        buildingGallery: [
            {url: "https://images.unsplash.com/photo-1544427920-c49ccfb85579?w=400"},
            {url: "https://images.unsplash.com/photo-1590076215667-875d4ef2d97e?w=400"}
        ],
        clergy: [{name: "Abba G/Mariam", bio: "Serving the parish for 10 years."}],
        services: [{name: "Kidassie", time: "Every Sunday 6am"}],
        sundaySchool: { text: "Teaching the next generation.", image: "https://via.placeholder.com/300" },
        sponsorship: "Support a child's education today.",
        registrationLinks: { membership: "#", sundaySchool: "#", abinetSchool: "#", serveWithUs: "#", sponsorship: "#" },
        donations: { zelle: "church@example.com" }
    };

    function goTo(id) { 
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active')); 
        document.getElementById(id).classList.add('active'); 
        window.scrollTo(0,0); 
    }

    function render() {
        const d = ChurchData;
        document.getElementById('ticker-content').innerHTML = d.newsTicker;
        document.getElementById('g-date').innerText = new Date().toDateString();
        document.getElementById('e-date').innerText = "ጥር ፲፱, ፳፻፲፮ ዓ.ም"; 

        document.getElementById('proj-title').innerText = d.buildingProject.title;
        document.getElementById('proj-desc').innerText = d.buildingProject.description;
        
        // VIDEO SOURCE LOADING FIX
        const videoElement = document.getElementById('proj-video');
        videoElement.src = d.buildingProject.videoURL;

        document.getElementById('proj-status').innerText = d.buildingProject.status;
        document.getElementById('proj-progress').style.width = d.buildingProject.progress;
        document.getElementById('proj-progress').innerText = d.buildingProject.progress;
        document.getElementById('building-gallery').innerHTML = d.buildingGallery.map(img => `<img src="${img.url}" style="width:100%; border-radius:8px;">`).join('');
        
        document.getElementById('txt-about').innerText = d.aboutUs;
        document.getElementById('lst-clergy').innerHTML = d.clergy.map(c => `<h3>${c.name}</h3><p>${c.bio}</p>`).join('');
        document.getElementById('lst-serv').innerHTML = d.services.map(s => `<b>${s.name}</b>: ${s.time}`).join('<br>');
        document.getElementById('txt-hub').innerText = "Explore our church ministries.";
        document.getElementById('txt-ss').innerText = d.sundaySchool.text;
        document.getElementById('img-ss').src = d.sundaySchool.image;
        document.getElementById('txt-spon').innerText = d.sponsorship;
        
        document.getElementById('l-mem').href = d.registrationLinks.membership;
        document.getElementById('l-ss').href = d.registrationLinks.sundaySchool;
        document.getElementById('l-ab').href = d.registrationLinks.abinetSchool;
        document.getElementById('l-srv').href = d.registrationLinks.serveWithUs;
        document.getElementById('l-sp').href = d.registrationLinks.sponsorship;
        
        document.getElementById('txt-zelle').innerText = "Zelle: " + d.donations.zelle;
    }

    window.onload = render;
</script>
</body>
</html>
