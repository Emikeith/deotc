<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EOTC Church Portal</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="logo-container"><img src="logo.png" alt="Church Logo" onerror="this.src='https://via.placeholder.com/70?text=LOGO'"></div>
    <h1 style="margin:0; font-size: 1.3rem;">የኢትዮጵያ ኦርቶዶክስ ተዋሕዶ ቤተክርስቲያን</h1>
</header>

<nav>
    <button class="menu-toggle" onclick="toggleMenu()">☰ MENU</button>
    <ul class="menu-container" id="menu">
        <li class="nav-item">
            <a class="nav-link" onclick="toggleSub(this)">Home ▾</a>
            <div class="dropdown">
                <a onclick="goTo('home-main')">Main Home</a>
                <a onclick="goTo('about-us')">About Us</a>
                <a onclick="goTo('clergy')">Clergy</a>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link" onclick="toggleSub(this)">Ministries ▾</a>
            <div class="dropdown">
                <a onclick="goTo('min-hub')">Ministry Hub</a>
                <a onclick="goTo('sunday-school')">Sunday School</a>
            </div>
        </li>
        <li class="nav-item"><a class="nav-link" onclick="goTo('calendar')">Calendar</a></li>
        <li class="nav-item"><a class="nav-link" onclick="goTo('payment')">Payment</a></li>
        <li class="nav-item"><a class="nav-link" onclick="goTo('contact')">Contact</a></li>
    </ul>
</nav>

<section id="home-main" class="page active">
    <div id="date-header" class="card" style="text-align:center; font-weight:bold; border-left:none; border: 2px solid var(--gold);">Loading Dates...</div>
    <div class="card" style="padding:0; overflow:hidden;">
        <iframe id="google-cal" src="" width="100%" height="600" frameborder="0" scrolling="no"></iframe>
    </div>
</section>

<section id="calendar" class="page">
    <div class="card">
        <h2>Upcoming Schedules</h2>
        <div id="events-list"></div>
    </div>
</section>

<section id="min-hub" class="page">
    <div class="card">
        <h2>Our Ministries</h2>
        <div id="ministry-grid" class="grid"></div>
    </div>
</section>

<section id="clergy" class="page">
    <div id="clergy-list"></div>
</section>

<script src="content.js"></script>
<script>
    function toggleMenu() { document.getElementById('menu').classList.toggle('show'); }
    function toggleSub(el) { if(window.innerWidth <= 800) el.nextElementSibling.classList.toggle('open'); }
    
    function goTo(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.getElementById('menu').classList.remove('show');
        window.scrollTo(0,0);
    }

    function renderContent() {
        // Render Calendar List
        document.getElementById('events-list').innerHTML = ChurchData.upcomingEvents.map(e => `
            <div class="event-item">
                <div class="event-date"><b>${e.month}</b><br>${e.day}</div>
                <div><h3 style="margin:0; color:var(--red);">${e.title}</h3><p style="margin:0;">${e.details}</p></div>
            </div>
        `).join('');

        // Render Ministries
        document.getElementById('ministry-grid').innerHTML = ChurchData.ministries.map(m => `
            <div class="min-card">
                <div style="font-size:2rem;">${m.icon}</div>
                <h3>${m.name}</h3>
                <p>${m.desc}</p>
            </div>
        `).join('');

        // Set Google Calendar Link
        document.getElementById('google-cal').src = ChurchData.googleCalendarURL;
    }

    // Include your Ethiopian Date Script here to populate #date-header
    window.onload = renderContent;
</script>
</body>
</html>
